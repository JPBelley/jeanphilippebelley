<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Home</title>
    <link rel="stylesheet" href="/css/style.css">

  </head>
  <body>

    <!-- Background image -->
    <div class="background-home">

      <!-- Overlay of the background image -->
      <div class="overlay">
      </div>

      <!-- Title of the home -->
      <div class="titles">
        <h1>Jean-Philippe Belley</h1>
        <h2>Wev Dev &amp; Design</h2>
      </div>

      <div class="learn-more-home">
        <a href="#">Learn more</a>
      </div>
    </div>

    <!-- Blur effect -->
    <div class="hover-blur-container">
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
      <div class="hover-blur-pixel"></div>
    </div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.2/TweenMax.min.js"></script>
<script type="text/javascript">
    var options = {
      imgSrc : "images/jpswag.jpg",
      containerName : "overlay",
      rows:15,
      columns:15,
      margin:0,
      animTime: 0.3
      }

      function ImageGrid(defaults)
      {
      var r = defaults.rows;
      var c = defaults.columns;
      var margin = defaults.margin;

      var placeholder = document.getElementsByClassName(defaults.containerName)[0];
      var container = document.createElement('div');
      container.className = "gridContainer";
      placeholder.appendChild(container);

      var gridTile;

      var w = (container.offsetWidth / c) -margin;
      var h = (container.offsetHeight / r) -margin;
      var arr = [];

      for (var i=0, l=r*c; i < l; i++)
      {
        gridTile = document.createElement('div');
        gridTile.className = "gridTile";
        gridTile.style.backgroundImage = "url("+defaults.imgSrc+")";


        arr = [(w+margin)*(i%c), (h+margin)*Math.floor(i/c), ((w+margin)*(i%c)+w-margin), (h+margin)*Math.floor(i/c), ((w+margin)*(i%c)+w-margin), ((h+margin)*Math.floor(i/c) + h-margin), (w+margin)*(i%c), ((h+margin)*Math.floor(i/c) + h-margin)];

       // console.log(i + " ====>>> " + arr + " ||||| " + i%c  + " |||||| " + i/c);


        TweenMax.set(gridTile, {webkitClipPath:'polygon('+arr[0]+'px '+ arr[1]+'px,'+arr[2]+'px '+arr[3]+'px, '+arr[4]+'px '+ arr[5] +'px, '+arr[6]+'px '+ arr[7] +'px)', clipPath:'polygon('+arr[0]+'px '+ arr[1]+'px,'+arr[2]+'px '+arr[3]+'px, '+arr[4]+'px '+ arr[5] +'px, '+arr[6]+'px '+ arr[7] +'px)'});

        container.appendChild(gridTile);

        fixTilePosition(gridTile, i);
      }

      placeholder.addEventListener("mouseover", function(e){
        var allTiles = e.currentTarget.querySelectorAll(".gridTile");
        for (var t=0, le = allTiles.length; t < le; t++)
          {
            TweenMax.to(allTiles[t], defaults.animTime, {css:{backgroundPosition:"0px 0px"}, ease:Power1.easeOut});
          }
      })

      placeholder.addEventListener("mouseleave", function(e){
        var allTiles = e.currentTarget.querySelectorAll(".gridTile");
        for (var ti=0, len = allTiles.length; ti < len; ti++)
          {
            fixTilePosition(allTiles[ti], ti, defaults.animTime);
          }
      })

      function fixTilePosition(tile, ind, time)
      {
        if(time==null)time=0;
        var centr, centrCol, centrRow, offsetW, offsetH, left, top;

        centr = Math.floor(c * r / 2);
        centrCol = Math.ceil(centr/c);
        centrRow = Math.ceil(centr/r);

        offsetW = w/centrCol;
        offsetH = h/centrRow;

        left = (Math.round((ind % c - centrCol + 1) * offsetW));
        top = (Math.round((Math.floor(ind/c) - centrRow + 1) * offsetH));

        //console.log(left, top)

        TweenMax.to(tile, time, {css:{backgroundPosition:left+"px "+top+"px"}, ease:Power1.easeOut});
      }
      }

      ImageGrid(options);
    </script>
  </body>
</html>
